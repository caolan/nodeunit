/* Copyright (C) 2007, 2008 gnombat@users.sourceforge.net */
/* License: http://shjs.sourceforge.net/doc/gplv3.html */

if(!this.sh_languages){this.sh_languages={}}var sh_requests={};function sh_isEmailAddress(A){if(/^mailto:/.test(A)){return false}return A.indexOf("@")!==-1}function sh_setHref(B,C,D){var A=D.substring(B[C-2].pos,B[C-1].pos);if(A.length>=2&&A.charAt(0)==="<"&&A.charAt(A.length-1)===">"){A=A.substr(1,A.length-2)}if(sh_isEmailAddress(A)){A="mailto:"+A}B[C-2].node.href=A}function sh_konquerorExec(B){var A=[""];A.index=B.length;A.input=B;return A}function sh_highlightString(V,L){if(/Konqueror/.test(navigator.userAgent)){if(!L.konquered){for(var b=0;b<L.length;b++){for(var d=0;d<L[b].length;d++){var c=L[b][d][0];if(c.source==="$"){c.exec=sh_konquerorExec}}}L.konquered=true}}var k=document.createElement("a");var M=document.createElement("span");var U=[];var H=0;var K=[];var W=0;var I=null;var R=function(i,a){var m=i.length;if(m===0){return }if(!a){var p=K.length;if(p!==0){var n=K[p-1];if(!n[3]){a=n[1]}}}if(I!==a){if(I){U[H++]={pos:W};if(I==="sh_url"){sh_setHref(U,H,V)}}if(a){var o;if(a==="sh_url"){o=k.cloneNode(false)}else{o=M.cloneNode(false)}o.className=a;U[H++]={node:o,pos:W}}}W+=m;I=a};var N=/\r\n|\r|\n/g;N.lastIndex=0;var C=V.length;var j=[];while(W<C){var P=W;var J;var Q;var G=N.exec(V);if(G===null){J=C;Q=C}else{J=G.index;Q=N.lastIndex}var F=V.substring(P,J);var X=-1;for(;;){var e=W-P;var Y;var S=K.length;if(S===0){Y=0}else{Y=K[S-1][2]}var l=L[Y];var T=l.length;if(Y!==X){j.length=0}var Z=null;var O=-1;for(var g=0;g<T;g++){var E;if(Y===X&&g<j.length&&(j[g]===null||e<=j[g].index)){E=j[g]}else{var B=l[g][0];B.lastIndex=e;E=B.exec(F);j[g]=E}if(E!==null&&(Z===null||E.index<Z.index)){Z=E;O=g;if(E.index===e){break}}}X=Y;if(Z===null){R(F.substring(e),null);break}else{if(Z.index>e){R(F.substring(e,Z.index),null)}var D=l[O];var f=D[1];var A;if(f instanceof Array){for(var h=0;h<f.length;h++){A=Z[h+1];R(A,f[h])}}else{A=Z[0];R(A,f)}switch(D[2]){case -1:break;case -2:K.pop();break;case -3:K.length=0;break;default:K.push(D);break}}}if(I){U[H++]={pos:W};if(I==="sh_url"){sh_setHref(U,H,V)}I=null}W=Q}return U}function sh_getClasses(D){var A=[];var B=D.className;if(B&&B.length>0){var E=B.split(" ");for(var C=0;C<E.length;C++){if(E[C].length>0){A.push(E[C])}}}return A}function sh_addClass(C,A){var D=sh_getClasses(C);for(var B=0;B<D.length;B++){if(A.toLowerCase()===D[B].toLowerCase()){return }}D.push(A);C.className=D.join(" ")}function sh_extractTagsFromNodeList(C,A){var F=C.length;for(var D=0;D<F;D++){var E=C.item(D);switch(E.nodeType){case 1:if(E.nodeName.toLowerCase()==="br"){var B;if(/MSIE/.test(navigator.userAgent)){B="\r"}else{B="\n"}A.text.push(B);A.pos++}else{A.tags.push({node:E.cloneNode(false),pos:A.pos});sh_extractTagsFromNodeList(E.childNodes,A);A.tags.push({pos:A.pos})}break;case 3:case 4:A.text.push(E.data);A.pos+=E.length;break}}}function sh_extractTags(C,B){var A={};A.text=[];A.tags=B;A.pos=0;sh_extractTagsFromNodeList(C.childNodes,A);return A.text.join("")}function sh_mergeTags(D,F){var A=D.length;if(A===0){return F}var C=F.length;if(C===0){return D}var I=[];var E=0;var B=0;while(E<A&&B<C){var H=D[E];var G=F[B];if(H.pos<=G.pos){I.push(H);E++}else{I.push(G);if(F[B+1].pos<=H.pos){B++;I.push(F[B]);B++}else{I.push({pos:H.pos});F[B]={node:G.node.cloneNode(false),pos:H.pos}}}}while(E<A){I.push(D[E]);E++}while(B<C){I.push(F[B]);B++}return I}function sh_insertTags(K,H){var G=document;var L=document.createDocumentFragment();var E=0;var D=K.length;var B=0;var J=H.length;var C=L;while(B<J||E<D){var I;var A;if(E<D){I=K[E];A=I.pos}else{A=J}if(A<=B){if(I.node){var F=I.node;C.appendChild(F);C=F}else{C=C.parentNode}E++}else{C.appendChild(G.createTextNode(H.substring(B,A)));B=A}}return L}function sh_highlightElement(D,G){sh_addClass(D,"sh_sourceCode");var C=[];var E=sh_extractTags(D,C);var F=sh_highlightString(E,G);var B=sh_mergeTags(C,F);var A=sh_insertTags(B,E);while(D.hasChildNodes()){D.removeChild(D.firstChild)}D.appendChild(A)}function sh_getXMLHttpRequest(){if(window.ActiveXObject){return new ActiveXObject("Msxml2.XMLHTTP")}else{if(window.XMLHttpRequest){return new XMLHttpRequest()}}throw"No XMLHttpRequest implementation available"}function sh_load(language,element,prefix,suffix){if(language in sh_requests){sh_requests[language].push(element);return }sh_requests[language]=[element];var request=sh_getXMLHttpRequest();var url=prefix+"sh_"+language+suffix;request.open("GET",url,true);request.onreadystatechange=function(){if(request.readyState===4){try{if(!request.status||request.status===200){eval(request.responseText);var elements=sh_requests[language];for(var i=0;i<elements.length;i++){sh_highlightElement(elements[i],sh_languages[language])}}else{throw"HTTP error: status "+request.status}}finally{request=null}}};request.send(null)}function sh_highlightDocument(G,I){var B=document.getElementsByTagName("pre");for(var E=0;E<B.length;E++){var F=B.item(E);var A=sh_getClasses(F);for(var C=0;C<A.length;C++){var H=A[C].toLowerCase();if(H==="sh_sourcecode"){continue}if(H.substr(0,3)==="sh_"){var D=H.substring(3);if(D in sh_languages){sh_highlightElement(F,sh_languages[D])}else{if(typeof (G)==="string"&&typeof (I)==="string"){sh_load(D,F,G,I)}else{throw'Found <pre> element with class="'+H+'", but no such language exists'}}break}}}};